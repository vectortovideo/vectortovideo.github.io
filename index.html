<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Vector to Video</title>
    
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>
</head>

<body>

    <button id="uiToggle">üëÅ</button>

    <div id="renderOverlay">
        <div class="loader"></div>
        <div id="renderText" style="font-size: 16px; font-weight: bold;">Processing...</div>
        <div id="renderProgress" style="color: #00ff88; margin-top: 5px; font-family: monospace;">0%</div>
        <div style="font-size: 11px; color: #666; margin-top: 15px;">Capturing frames & Encoding MP4</div>
    </div>

    <div class="sidebar" id="sidebar">

        <div class="logo-header">
            <svg class="logo-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                <line x1="12" y1="22.08" x2="12" y2="12"></line>
                <polygon points="7 6 19 12 7 18" fill="#ff0000" stroke="none"></polygon>
            </svg>
            <div class="logo-text">Vector to Video</div>
        </div>

        <div class="control-group">
            <label>1. SVG File</label>
            <input type="file" id="upload" accept=".svg">
        </div>
        
        <div class="section-header">PRESETS</div>
        <div class="control-group">
            <select id="presetSelect">
                <option value="">-- Load Preset --</option>
                <optgroup label="Factory Defaults" id="factoryPresets"></optgroup>
                <optgroup label="My Custom Presets" id="customPresets"></optgroup>
            </select>
            <div class="row" style="margin-top: 5px;">
                <input type="text" id="presetName" placeholder="Save preset as..." style="margin:0;">
                <button id="savePresetBtn" class="secondary">Save</button>
                <button id="delPresetBtn" class="secondary danger">Del</button>
            </div>
        </div>

        <div class="section-header">MOTION</div>
        <div class="control-group">
            <label>Animation Style</label>
            <select id="animStyle" class="sync-val">
                <option value="spin">Continuous Spin</option>
                <option value="seesaw">See-Saw (Rocking)</option>
                <option value="bounce">Bounce (Up/Down)</option>
                <option value="tumble">3-Axis Tumble</option>
                <option value="float" selected>Double-Bounce Float</option>
            </select>
            <label>Loop Duration <span id="v_duration" class="val-display">4.0s</span></label>
            <input type="range" id="duration" min="1" max="15" step="0.5" value="4.0" class="sync-val">
            
            <label>Speed / Cycles <span id="v_speed" class="val-display">1</span></label>
            <input type="range" id="speed" min="1" max="10" step="1" value="1" class="sync-val" title="Multiplier for animation cycles per loop">
        </div>

        <div class="section-header">LOOK & FEEL</div>
        <div class="control-group">
            <label>Material</label>
            <select id="matMode" class="sync-val">
                <option value="chrome" selected>Chrome</option>
                <option value="matte">Matte</option>
                <option value="crystal">Crystal</option>
            </select>
            <label>Roughness <span id="v_roughness" class="val-display">0.15</span></label>
            <input type="range" id="roughness" min="0" max="1" step="0.01" value="0.15" class="sync-val">
            <label>Metalness <span id="v_metalness" class="val-display">1.00</span></label>
            <input type="range" id="metalness" min="0" max="1" step="0.01" value="1.0" class="sync-val">
            <label>Depth <span id="v_depth" class="val-display">30</span></label>
            <input type="range" id="depth" min="1" max="250" value="30" class="sync-val">
            <label>Bevel <span id="v_bevel" class="val-display">0.5</span></label>
            <input type="range" id="bevel" min="0" max="5" step="0.1" value="0.5" class="sync-val">
            <div class="row">
                <input type="checkbox" id="innerBevel" class="sync-val" style="width:auto;">
                <span style="font-size:11px;color:#888;">Internal Bevel</span>
            </div>
        </div>

        <div class="section-header">BLOOM</div>
        <div class="control-group">
            <label>Strength <span id="v_bloomStrength" class="val-display">0.5</span></label>
            <input type="range" id="bloomStrength" min="0" max="3" step="0.1" value="0.5" class="sync-val">
            <label>Threshold <span id="v_bloomThreshold" class="val-display">0.85</span></label>
            <input type="range" id="bloomThreshold" min="0" max="1.1" step="0.01" value="0.85" class="sync-val">
        </div>

        <div class="section-header">LIGHTING</div>
        <div class="control-group">
            <label>Intensity <span id="v_lightIntensity" class="val-display">5.0</span></label>
            <input type="range" id="lightIntensity" min="0" max="10" step="0.1" value="5.0" class="sync-val">
            <label>Color</label>
            <input type="color" id="lightColor" value="#ffaa00" class="sync-val">
            <label>Z-Pos <span id="v_lightZ" class="val-display">600</span></label>
            <input type="range" id="lightZ" min="100" max="2000" step="10" value="600" class="sync-val">
        </div>

        <div class="section-header">OUTPUT</div>
        <div class="control-group">
            <label>Format</label>
            <select id="resolution" class="sync-val">
                <option value="window">Fit Screen</option>
                <option value="tiktok">TikTok (9:16)</option>
                <option value="yt_hd">YouTube HD (16:9)</option>
                <option value="insta">Square (1:1)</option>
            </select>
            <label>Background</label>
            <div class="row">
                <input type="color" id="bgColor" value="#050505" class="sync-val">
                <div class="row" style="flex-grow:1; margin-left:10px;">
                    <input type="checkbox" id="bgTransparent" class="sync-val" style="width:auto;">
                    <span style="font-size:11px;">Transparent</span>
                </div>
            </div>
        </div>

        <div class="control-group">
            <label>Zoom <span id="v_zoom" class="val-display">1.5</span></label>
            <input type="range" id="zoom" min="0.1" max="5" step="0.1" value="1.5" class="sync-val">
            <button id="fitBtn" class="secondary" style="margin-top:5px;">Auto-Fit Object</button>
        </div>

        <button id="loopBtn" class="primary">Start Render</button>
    </div>

    <div id="canvas-container"></div>

    <script type="module" src="app.js"></script>

</body>
</html>